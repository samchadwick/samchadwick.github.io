<!doctype HTML>
<html>
<head>
    <meta http-equiv="refresh" content="30">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script>
        AFRAME.registerComponent('scene1end', {
            init: function () {
                this.el.addEventListener('animationcomplete', function () {
                    var scene2 = document.querySelector('#scene2');
                    console.log("Start Scene 2");
                    scene2.emit('start');
                    [].slice.call(scene2.children).forEach(child => {
                        child.emit("start");
                    });
                });
            }
        });
        AFRAME.registerComponent('scene2end', {
            init: function () {
                var scene2 = document.querySelector('#scene2');
                this.el.addEventListener('animationcomplete', function () {
                    var scene3 = document.querySelector('#scene3');
                    console.log("Start Scene 3");
                    scene2.emit('end');
                    [].slice.call(scene2.children).forEach(child => {
                        child.emit("end");
                    });
                    scene3.emit('start');
                    [].slice.call(scene3.children).forEach(child => {
                        child.emit("start");
                    });
                });
            }
        });
        AFRAME.registerComponent('group-opacity', {
            schema: {opacity: {default: 1.0}},
            update: function () {
                var opacity = this.data.opacity;
                var children = [].slice.call(this.el.children);
                children
                    .filter(function (child) {
                        return child.hasAttribute('material') || child.hasAttribute('group-opacity');
                    })
                    .forEach(function (child) {
                        child.setAttribute('material', "opacity: " + opacity);
                        child.setAttribute('group-opacity', "opacity: " + opacity);
                    });
                children
                    .filter(function (child) {
                        return child.hasAttribute('value');
                    })
                    .forEach(function (child) {
                        child.setAttribute('opacity', opacity);
                    });
            }
        });
    </script>
</head>
<body>
<a-scene>
    <a-assets>

    </a-assets>

    <a-entity id="scene1" scene1end group-opacity="opacity: 1.0"
              animation="property: group-opacity.opacity; from: 1; to: 0; delay: 6000;">
        <a-box color="grey" position="0.2 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: -2 3 -5; dur: 3000" easing="easeInOutQuad"></a-box>
        <a-box material="color: black; opacity: 1; wireframe: true" position="0.3 1.5 1" rotation="0 0 0"
               scale="0.2 0.2 0.2"
               animation="property: position; to: 2 4 -5; dur: 3000; delay: 500"></a-box>

        <a-text color="black" position="0.2 1.5 1" scale="1 1 1" value="The"
                animation__show="property: position; to: -2 2 -4; dur: 3000; delay: 100"></a-text>
        <a-text color="black" position="0.4 1.5 1" scale="1 1 1" value="world"
                animation="property: position; to: -1.55 2 -4; dur: 3000; delay: 300"></a-text>
        <a-text color="black" position="0.6 1.5 1" scale="1 1 1" value="looks"
                animation="property: position; to: -0.95 2 -4; dur: 3000; delay: 500"></a-text>
        <a-text color="black" position="0.7 1.5 1" scale="1 1 1" value="different"
                animation="property: position; to: -0.35 2 -4; dur: 3000; delay: 700"></a-text>
        <a-text color="black" position="0.9 1.5 1" scale="1 1 1" value="when"
                animation="property: position; to: 0.55 2 -4; dur: 3000; delay: 800"></a-text>

        <a-text color="black" position="0.2 1.3 1" scale="1 1 1" value="you"
                animation="property: position; to: -1.9 1.7 -4; dur: 3000; delay: 500"></a-text>
        <a-text color="black" position="0.4 1.3 1" scale="1 1 1" value="take"
                animation="property: position; to: -1.5 1.7 -4; dur: 3000; delay: 700"></a-text>
        <a-text color="black" position="0.7 1.3 1" scale="1 1 1" value="a"
                animation="property: position; to: -1.0 1.7 -4; dur: 3000; delay: 800"></a-text>
        <a-text color="black" position="0.8 1.3 1" scale="1 1 1" value="fresh"
                animation="property: position; to: -0.8 1.7 -4; dur: 3000; delay: 900"></a-text>
        <a-text color="black" position="0.9 1.3 1" scale="1 1 1" value="perspective"
                animation="property: position; to: -0.22 1.7 -4; dur: 3000; delay: 1000;"></a-text>
    </a-entity>


    <a-entity id="scene2" group-opacity="opacity: 0"
              animation__start="property: group-opacity.opacity; from: 0; to: 1; startEvents: start;"
              animation__end="property: group-opacity.opacity; from: 1; to: 0; startEvents: end;">
        <a-box color="grey" position="0.2 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: -2 3 -5; dur: 3000; startEvents: start;"
               easing="easeInOutQuad"></a-box>
        <a-box material="color: black; opacity: 1; wireframe: true" position="0.3 1.5 1" rotation="0 0 0"
               scale="0.2 0.2 0.2"
               animation="property: position; to: 2 4 -5; dur: 3000; delay: 500; startEvents: start;"></a-box>

        <a-text color="black" position="0.2 1.5 1" scale="1 1 1" value="It"
                animation="property: position; to: -2 2 -4; dur: 3000; delay: 100; startEvents: start;"></a-text>
        <a-text color="black" position="0.4 1.5 1" scale="1 1 1" value="can"
                animation="property: position; to: -1.55 2 -4; dur: 3000; delay: 300; startEvents: start;"></a-text>
        <a-text color="red" position="0.6 1.5 1" scale="1 1 1" value="highlight"
                animation="property: position; to: -0.95 2 -4; dur: 3000; delay: 500; startEvents: start;"></a-text>
        <a-text color="black" position="0.7 1.5 1" scale="1 1 1" value="new opportunities"
                animation="property: position; to: -0.35 2 -4; dur: 3000; delay: 700; startEvents: start;"></a-text>
        <a-text color="black" position="0.9 1.5 1" scale="1 1 1" value="when"
                animation="property: position; to: 0.55 2 -4; dur: 3000; delay: 800; startEvents: start;" scene2end></a-text>
    </a-entity>
    <a-entity id="scene3" group-opacity="opacity: 0"
              animation__start3="property: group-opacity.opacity; from: 0; to: 1; startEvents: start;"
              animation__end3="property: group-opacity.opacity; from: 1; to: 0; startEvents: end;">
        <a-text color="black" position="0.2 1.3 1" scale="1 1 1" value="And"
                animation="property: position; to: -1.9 1.7 -4; dur: 3000; delay: 500; startEvents: start;"></a-text>
        <a-text color="black" position="0.4 1.3 1" scale="1 1 1" value="reveal"
                animation="property: position; to: -1.5 1.7 -4; dur: 3000; delay: 700; startEvents: start;"></a-text>
        <a-text color="black" position="0.7 1.3 1" scale="1 1 1" value="new"
                animation="property: position; to: -1.0 1.7 -4; dur: 3000; delay: 800; startEvents: start;"></a-text>
        <a-text color="black" position="0.8 1.3 1" scale="1 1 1" value="obstacles"
                animation="property: position; to: -0.8 1.7 -4; dur: 3000; delay: 900; startEvents: start;" scene3end></a-text>
    </a-entity>

    <a-box color="#FF0000" position="-4 2 0"
           animation__red_green="property: material.color; from: #000000; to: #FF0000; delay: 2000; dur: 1000;">
    </a-box>
</a-scene>
</body>
</html>

<!--

            <a-text animated id="videoButtonText" value="Contact Us" color="red" scale="1.1 1.1 1.1" opacity="0"
                align="center"
                animation__buttontext_fadein="property: text.opacity; from: 0; to: 1; dur: 3000; delay: 10000;"
                animation__buttontext_changecolour="property: text.color; from: #FF0000; to: #00FF00; delay: 13000; dur: 1000;">
        </a-text>
-->
