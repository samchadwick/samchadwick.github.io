<!doctype HTML>
<html>
<head>
    <meta http-equiv="refresh" content="20">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script>
        AFRAME.registerComponent('scene1end', {
            init: function () {
                this.el.addEventListener('animationcomplete', function () {
                    var scene2 = document.querySelector('#scene2');
                    console.log("Start Scene 2");
                    scene2.emit('start');
                    [].slice.call(scene2.children).forEach(child => {
                        child.emit("start");
                    });
                });
            }
        });
        AFRAME.registerComponent('scene2end', {
            init: function () {
                var scene2 = document.querySelector('#scene2');
                this.el.addEventListener('animationcomplete', function () {
                    var scene3 = document.querySelector('#scene3');
                    console.log("Start Scene 3");
                    scene2.emit('end');
                    [].slice.call(scene2.children).forEach(child => {
                        child.emit("end");
                    });
                    scene3.emit('start');
                    [].slice.call(scene3.children).forEach(child => {
                        child.emit("start");
                    });
                });
            }
        });
        AFRAME.registerComponent('group-opacity', {
            schema: {opacity: {default: 1.0}},
            update: function () {
                var opacity = this.data.opacity;
                var children = [].slice.call(this.el.children);
                children
                    .filter(function (child) {
                        return child.hasAttribute('material') || child.hasAttribute('group-opacity');
                    })
                    .forEach(function (child) {
                        child.setAttribute('material', "opacity: " + opacity);
                        child.setAttribute('group-opacity', "opacity: " + opacity);
                    });
                children
                    .filter(function (child) {
                        return child.hasAttribute('value');
                    })
                    .forEach(function (child) {
                        child.setAttribute('opacity', opacity);
                    });
            }
        });
    </script>
</head>
<body>
<a-scene>
    <a-assets>
        <!-- None required yet -->
    </a-assets>

        <a-entity id="rig" position="0 1.6 0"
            animation="property: rotation; to: 0 -90 0; delay: 4000; dur: 4000;"
            animation__2="property: rotation; from: 0 -90 0; to: 0 -180 0; delay: 10000; dur: 4000;">
          <a-entity id="camera" camera look-controls></a-entity>
        </a-entity>

    <!-- Scene 1-->
    <a-entity id="scene1" group-opacity="opacity: 1.0"
              animation="property: group-opacity.opacity; from: 1; to: 0.9; delay: 5500;">



        <a-box color="grey" position="0.2 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: -2 3 -5; dur: 3000" easing="easeInOutQuad"
               animation__color="property: material.color; from: #808080; to: #FF0000; delay: 2000; dur: 2000;"></a-box> 
        <a-box color="grey" position="0.2 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: -3 1 -3; dur: 3000" easing="easeInOutQuad"
               animation__color="property: material.color; from: #808080; to: #FF0000; delay: 2000; dur: 2000;"></a-box> 
        <a-box color="grey" position="0.2 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: -1 1 -4; dur: 3000" easing="easeInOutQuad"
               animation__color="property: material.color; from: #808080; to: #FF0000; delay: 2000; dur: 2000;"></a-box> 
        <a-box color="grey" position="3.2 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: 2 1.2 -3.5; dur: 3000" easing="easeInOutQuad"
               animation__color="property: material.color; from: #808080; to: #FF0000; delay: 2000; dur: 2000;"></a-box> 
        <a-box color="grey" position="3.2 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: 1 1 -1.5; dur: 3000" easing="easeInOutQuad"
               animation__color="property: material.color; from: #808080; to: #FF0000; delay: 2000; dur: 2000;"></a-box> 
        <a-box color="grey" position="3.2 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: -1 0.8 -12; dur: 3000" easing="easeInOutQuad"
               animation__color="property: material.color; from: #808080; to: #FF0000; delay: 2000; dur: 2000;"></a-box> 
        <a-box color="grey" position="3.2 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: 2 3 -2; dur: 3000" easing="easeInOutQuad"
               animation__color="property: material.color; from: #808080; to: #FF0000; delay: 2000; dur: 2000;"></a-box> 
        <a-box material="color: black; opacity: 1; wireframe: true" position="0.3 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: 2 4 -5; dur: 3000; delay: 500"></a-box>
        <a-box material="color: black; opacity: 1; wireframe: true" position="0.3 1.5 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: -1 2 -1; dur: 3000; delay: 500"></a-box>

        <a-text color="black" position="0.2 1.5 1" scale="1 1 1" value="The"
                animation__show="property: position; to: -2 2 -4; dur: 3000; delay: 100"></a-text>
        <a-text color="black" position="0.4 1.5 1" scale="1 1 1" value="world"
                animation="property: position; to: -1.55 2 -4; dur: 3000; delay: 300"></a-text>
        <a-text color="black" position="0.6 1.5 1" scale="1 1 1" value="looks"
                animation="property: position; to: -0.95 2 -4; dur: 3000; delay: 500"></a-text>
        <a-text color="black" position="0.7 1.5 1" scale="1 1 1" value="different"
                animation="property: position; to: -0.35 2 -4; dur: 3000; delay: 700"></a-text>
        <a-text color="black" position="0.9 1.5 1" scale="1 1 1" value="when"
                animation="property: position; to: 0.55 2 -4; dur: 3000; delay: 800"></a-text>

        <a-text color="black" position="0.2 1.3 1" scale="1 1 1" value="you"
                animation="property: position; to: -1.9 1.7 -4; dur: 3000; delay: 500"></a-text>
        <a-text color="black" position="0.4 1.3 1" scale="1 1 1" value="take"
                animation="property: position; to: -1.5 1.7 -4; dur: 3000; delay: 700"></a-text>
        <a-text color="black" position="0.7 1.3 1" scale="1 1 1" value="a"
                animation="property: position; to: -1.0 1.7 -4; dur: 3000; delay: 800"></a-text>
        <a-text color="black" position="0.8 1.3 1" scale="1 1 1" value="fresh"
                animation="property: position; to: -0.8 1.7 -4; dur: 3000; delay: 900;"
                animation__color="property: text.color; from: #000000; to: #FF0000; delay: 2500; dur: 2000;"></a-text>
        <a-text color="black" position="0.9 1.3 1" scale="1 1 1" value="perspective"
                animation="property: position; to: -0.22 1.7 -4; dur: 3000; delay: 1000;"
                animation__color="property: text.color; from: #000000; to: #FF0000; delay: 2500; dur: 2000;" scene1end></a-text>
    </a-entity>

    <!-- Scene 2 -->
    <a-entity id="scene2" group-opacity="opacity: 0"
              animation__start="property: group-opacity.opacity; from: 0; to: 1; startEvents: start;"
              animation__end="property: group-opacity.opacity; from: 1; to: 0.9; delay: 3000; startEvents: end;">

        <a-box color="grey" position="-2.2 1 -3" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: 3 1.2 -2; dur: 3000; startEvents: start;" easing="easeInOutQuad"></a-box>
        <a-box color="grey" position="-2.2 1 -2" rotation="0 0 0" scale="0.3 0.3 0.3"
               animation="property: position; to: 4 1.2 -1; dur: 3000; delay: 500; startEvents: start;" easing="easeInOutQuad"
               animation__color="property: material.color; from: #808080; to: #FF0000; delay: 4000; dur: 2000; startEvents: start;" ></a-box> 
        <a-box material="color: black; opacity: 1; wireframe: true" position="-2.2 1 1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: 2 1 1; dur: 3000; delay: 200; startEvents: start;"></a-box>

        <a-text color="black" position="-2.2 1.5 -2" scale="1 1 1" rotation="0 -90 0" value="It"
                animation="property: position; to: 5 2 -1.8; dur: 3000; delay: 400; startEvents: start;"></a-text>
        <a-text color="black" position="-1.8 1.5 -1" scale="1 1 1" rotation="0 -90 0" value="can"
                animation="property: position; to: 5 2 -1.6; dur: 3000; delay: 300; startEvents: start;"></a-text>
        <a-text color="red" position="-2.1 1.5 0" scale="1 1 1" rotation="0 -90 0" value="highlight"
                animation="property: position; to: 5 2 -1.2; dur: 3000; delay: 500; startEvents: start;"></a-text>
        <a-text color="black" position="-2.3 1.5 1.5" scale="1 1 1" rotation="0 -90 0" value="new"
                animation="property: position; to: 5 2 -0.3; dur: 3000; delay: 700; startEvents: start;"></a-text>
        <a-text color="black" position="-2.4 1.5 2" scale="1 1 1" rotation="0 -90 0" value="opportunities"
                animation="property: position; to: 5 2 0.15; dur: 3000; delay: 800; startEvents: start;" scene2end></a-text>
    </a-entity>

    <!-- Scene 3 -->
    <a-entity id="scene3" group-opacity="opacity: 0"
              animation__start3="property: group-opacity.opacity; from: 0; to: 1; startEvents: start;"
              animation__end3="property: group-opacity.opacity; from: 1; to: 0.9; delay: 3000; startEvents: end;">

        <a-box color="grey" position="-0.2 1 -1" rotation="0 0 0" scale="0.2 0.2 0.2"
               animation="property: position; to: 2 1.2 2; dur: 3000; delay: 800; startEvents: start;" easing="easeInOutQuad"></a-box>
        <a-box color="grey" position="-0.2 1 -1" rotation="0 0 0" scale="0.4 0.4 0.4"
               animation="property: position; to: 4 1.2 1; dur: 3000; delay: 100; startEvents: start;" easing="easeInOutQuad"
               animation__color="property: material.color; from: #808080; to: #FF0000; delay: 2000; dur: 2000; startEvents: start;" ></a-box> 

        <a-text color="black" position="-2.2 1.5 -2" scale="1 1 1" rotation="0 180 0" value="And"
                animation="property: position; to: 1.9 1.7 4; dur: 3000; delay: 400; startEvents: start;"></a-text>
        <a-text color="black" position="-1.8 1.5 -1" scale="1 1 1" rotation="0 180 0" value="reveal"
                animation="property: position; to: 1.4 1.7 4; dur: 3000; delay: 300; startEvents: start;"></a-text>
        <a-text color="red" position="-2.1 1.5 0" scale="1 1 1" rotation="0 180 0" value="hidden"
                animation="property: position; to: 0.6 1.7 4; dur: 3000; delay: 500; startEvents: start;"></a-text>
        <a-text color="black" position="-2.4 1.5 2" scale="1 1 1" rotation="0 180 0" value="obstacles"
                animation="property: position; to: -0.2 1.7 4; dur: 3000; delay: 800; startEvents: start;" scene3end></a-text>
    </a-entity>

</a-scene>
</body>
</html>
